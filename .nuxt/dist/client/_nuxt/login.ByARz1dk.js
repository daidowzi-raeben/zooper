import{_ as S,r as l,c as a,g as t,e as n,B as C,E as V,H as v,I as f,f as E,w as I,t as T,G as D,J as N,b as r,z as Q}from"./entry.eW3Hl86w.js";import{QrcodeStream as R}from"./vue-qrcode-reader.CyWqpBHN.js";import{b as B}from"./api.xjxtr2Ie.js";const O={class:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-100 via-purple-100 to-white px-4"},P={class:"bg-white rounded-xl shadow-xl p-8 max-w-sm w-full text-center"},U={class:"mt-6 mb-6"},j={key:3,class:"mt-6 space-y-4 text-left"},A={class:"text-center mt-4"},J={key:4,class:"text-red-500 text-sm mt-4"},L={components:{QrcodeStream:()=>S(()=>import("./vue-qrcode-reader.CyWqpBHN.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(p=>p.QrcodeStream)}},H=Object.assign(L,{__name:"login",setup(p){const o=l(!1),u=l(!1),d=l(""),x=l(""),m=l(""),c=l(""),g=N(),y=()=>{o.value=!0,d.value=""},w=()=>{u.value=!0,x.value=""},_=s=>{var b;const e=(b=s[0])==null?void 0:b.rawValue;e&&(o.value=!1,g.push("/sign/"+e))},k=s=>{d.value="카메라 접근 실패",console.error(s),o.value=!1},h=async()=>{var s;if(!m.value||!c.value)return alert("이메일과 비밀번호를 모두 입력해 주세요.");try{const e=await B("teacher.php",{mode:"login",mb_email:m.value,mb_pw:c.value});if(console.log(e==null?void 0:e.data),(e==null?void 0:e.result)=="SUCCESS")sessionStorage.setItem("t_idnt_code",(s=e==null?void 0:e.data)==null?void 0:s.idnt_code),sessionStorage.setItem("idnt_code","teacher"),sessionStorage.setItem("teacher",JSON.stringify(e==null?void 0:e.data)),window.location.href="/teacher";else return(e==null?void 0:e.result)=="NOT_APPROVED"?alert("승인되지 않은 계정입니다. 관리자에게 문의하세요."):alert("로그인에 실패했습니다.")}catch(e){console.error(e)}};return(s,e)=>{const b=D("router-link");return r(),a("div",O,[t("div",P,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold text-gray-800 mb-4"},"QR 코드 로그인",-1)),e[8]||(e[8]=t("p",{class:"text-sm text-gray-600 mb-6"},"QR 코드를 스캔해주세요",-1)),!o.value&&!u.value?(r(),a("button",{key:0,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-full transition",onClick:y}," QR코드로 로그인 ")):n("",!0),t("div",U,[!o.value&&!u.value?(r(),a("button",{key:0,onClick:w,class:"text-blue-600 underline text-sm hover:text-blue-800"}," 선생님이신가요? ")):n("",!0)]),o.value?(r(),C(V(R),{key:1,onDetect:_,onError:k})):n("",!0),o.value?(r(),a("button",{key:2,class:"w-full bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-md transition mt-2",onClick:e[0]||(e[0]=i=>o.value=!1)},"취소")):n("",!0),u.value?(r(),a("div",j,[t("div",null,[e[4]||(e[4]=t("label",{for:"userId",class:"block text-sm font-medium text-gray-700"},"이메일",-1)),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>m.value=i),type:"text",id:"userId",name:"userId",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[f,m.value]])]),t("div",null,[e[5]||(e[5]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"비밀번호",-1)),v(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>c.value=i),type:"password",id:"password",name:"password",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[f,c.value]])]),t("div",null,[t("button",{class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md transition",onClick:h},"로그인"),t("button",{class:"w-full bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-md transition mt-2",onClick:e[3]||(e[3]=i=>u.value=!1)},"취소"),t("div",A,[E(b,{to:"/signUp",class:"text-sm text-blue-600 underline hover:text-blue-800"},{default:I(()=>e[6]||(e[6]=[Q("가입하기")])),_:1,__:[6]})])])])):n("",!0),d.value?(r(),a("p",J,T(d.value),1)):n("",!0)])])}}});export{H as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./vue-qrcode-reader.CyWqpBHN.js","./entry.eW3Hl86w.js","./entry.BxOTx4W7.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
