{"version":3,"file":"index-4TqLWtMh.js","sources":["../../../../common/allergy.js","../../../../components/Home/Intro.vue","../../../../pages/index.vue"],"sourcesContent":["export const allergyMap = {\n    1: '난류 (계란 등)',\n    2: '우유',\n    3: '메밀',\n    4: '땅콩',\n    5: '대두 (콩)',\n    6: '밀',\n    7: '고등어',\n    8: '게',\n    9: '새우',\n    10: '돼지고기',\n    11: '복숭아',\n    12: '토마토',\n    13: '아황산류',\n    14: '호두',\n    15: '닭고기',\n    16: '쇠고기',\n    17: '오징어',\n    18: '조개류 (굴, 전복, 홍합 등)'\n}","<script setup>\n\nimport { apiPost, apiPoint } from '@/common/api'\nimport { allergyMap } from '@/common/allergy'\nconst logout = () => {\n  sessionStorage.removeItem('idnt_code')\n  sessionStorage.removeItem('student')\n  sessionStorage.removeItem('t_idnt_code')\n  sessionStorage.removeItem('teacher')\n  window.location.href = '/login'\n}\n\nconst student = ref({});\nconst memberPoint = ref(0)\n\nconst storeItems = ref([])\nconst teacher = ref(null)\n\nconst fetchStoreItems = async () => {\n  const res = await apiPost('store.php', {\n    mode: 'storeList',\n    teacher: teacher,\n  })\n\n  if (res.result === 'SUCCESS') {\n    storeItems.value = res.data\n  }\n}\n\n\nonMounted(async () => {\n  if (sessionStorage.getItem('student')) {\n    student.value = JSON.parse(sessionStorage.getItem('student'))\n  }\n  memberPoint.value = await apiPoint()\n  teacher.value = JSON.parse(sessionStorage.getItem('student'))?.teacher\n  fetchStoreItems()\n  await fetchMeals()\n\n})\n\nuseSeoMeta({\n  title: \"Fayaz Ahmed\",\n  description:\n    \"I'm Fayaz, your friendly neighborhood software, product engineer and designer from Bengaluru, India. I specialize in building web applications and sites using Javascript, React, Vue & Node.\",\n});\n\nconst isMoney = ref(false)\n\nconst meals = ref([])\n\nconst fetchMeals = async () => {\n  const res = await apiPost('meal.php', {\n    idx: student.value?.teacher\n  })\n\n  if (res.result === 'SUCCESS' || res.result === 'CACHED') {\n    meals.value = res.data\n  }\n}\n\n\n\n// 문자열에서 알레르기 번호만 추출\nconst extractAllergyNames = (text) => {\n  const match = text.match(/\\(([\\d.,\\s]+)\\)/)\n  if (!match) return []\n\n  return match[1]\n    .split(/[.,\\s]+/)\n    .map(Number)\n    .filter(n => allergyMap[n])\n    .map(n => allergyMap[n])\n}\n</script>\n\n\n<template>\n  <div>\n    <div class=\"space-y-4\">\n      <!-- 환영 메시지 -->\n      <div class=\"flex justify-between items-center\">\n        <p class=\"text-lg font-semibold text-gray-700\">{{ student?.student_name }}친구, 환영합니다 👋</p>\n        <button\n          class=\"flex items-center gap-2 bg-white text-red-500 border border-red-300 px-3 py-1 rounded-full shadow-sm hover:bg-red-50 transition\"\n          @click=\"logout\">\n          <span class=\"i-heroicons-arrow-right-on-rectangle w-4 h-4\" />\n          로그아웃\n        </button>\n      </div>\n\n      <!-- 내 잔액 -->\n      <div\n        class=\"col-span-2 rounded-2xl shadow-md p-4 bg-gradient-to-r from-green-400 to-blue-500 text-white flex justify-between items-center\">\n        <div class=\"flex flex-col justify-center\">\n          <p class=\"text-sm opacity-80\">내 잔액</p>\n          <p class=\"text-2xl font-bold\">\n            <span v-if=\"isMoney\" @click=\"isMoney = false\">\n              💰 {{ Number(memberPoint || 0).toLocaleString() }} <span\n                class=\"text-sm font-normal align-middle\">돌멩이</span>\n            </span>\n            <span v-if=\"!isMoney\" @click=\"isMoney = true\">\n              나의 잔액 확인하기\n            </span>\n          </p>\n        </div>\n        <UButton label=\"이체하기\" color=\"white\" class=\"text-blue-800 bg-white bg-opacity-90 hover:bg-opacity-100\"\n          @click=\"$router.push('/transfer')\" />\n      </div>\n\n      <!-- 버튼 8개 -->\n      <div class=\"grid grid-cols-2 gap-4\">\n        <router-link to=\"/income\">\n          <div\n            class=\"rounded-2xl shadow-md p-4 bg-gradient-to-r from-pink-400 to-red-400 text-white text-center text-lg font-bold cursor-pointer\">\n            💰 입금\n          </div>\n        </router-link>\n        <router-link to=\"/expense\">\n          <div\n            class=\"rounded-2xl shadow-md p-4 bg-gradient-to-r from-yellow-300 to-orange-400 text-white text-center text-lg font-bold cursor-pointer\">\n            💸 출금\n          </div>\n        </router-link>\n        <!-- <router-link to=\"/tax\">\n        <div class=\"rounded-2xl shadow-md p-4 bg-gradient-to-r from-purple-400 to-pink-500 text-white text-center text-lg font-bold cursor-pointer\">\n          💼 세금\n        </div>\n      </router-link>\n      <router-link to=\"/penalty\">\n        <div class=\"rounded-2xl shadow-md p-4 bg-gradient-to-r from-blue-300 to-indigo-400 text-white text-center text-lg font-bold cursor-pointer\">\n          ⚠️ 벌금\n        </div>\n      </router-link> -->\n      </div>\n    </div>\n\n    <!-- 오늘의 급식 -->\n    <div class=\"mt-8 rounded-2xl shadow-md p-4 bg-white border\">\n      <p class=\"text-base font-semibold text-gray-800 mb-2\">🍱 오늘의 급식</p>\n      <ul class=\"list-disc list-inside text-gray-700 space-y-1\">\n        <li v-for=\"(meal, index) in meals\" :key=\"index\">\n          <span>{{ meal }}</span>\n          <div v-if=\"extractAllergyNames(meal).length\" class=\"text-xs text-gray-500 ml-4 mt-1\">\n            ⚠️ 알레르기 유발 식품: {{ extractAllergyNames(meal).join(', ') }}\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <!-- <div class=\"mt-10\">\n          <div class=\"\">\n            <h1 class=\"text-2xl font-bold mb-4\">상점 아이템 목록</h1>\n\n            <div v-if=\"storeItems.length > 0\">\n              <ul>\n                <li\n                  v-for=\"(item, index) in storeItems\"\n                  :key=\"index\"\n                  class=\"mb-4 p-4 border rounded-lg\"\n                >\n                  <div class=\"text-lg font-semibold\">{{ item.item_name }}</div>\n                  <div class=\"text-sm text-gray-600\">{{ item.item_desc }}</div>\n                  <div class=\"text-right font-bold text-blue-600\">\n                    {{ item.price.toLocaleString() }} 포인트\n                  </div>\n                </li>\n              </ul>\n            </div>\n\n            <div v-else class=\"text-gray-500\">불러올 아이템이 없습니다.</div>\n          </div>\n      </div> -->\n  </div>\n</template>","<template>\n  <main class=\"min-h-screen\">\n    <div class=\"space-y-24\">\n      <HomeIntro />\n      <!-- <HomeSocialLinks /> -->\n      <!-- <HomeFeaturedProjects /> -->\n      <!-- <HomeFeaturedArticles /> -->\n      <!-- <HomeNewsletter /> -->\n    </div>\n  </main>\n</template>\n"],"names":["_ssrInterpolate","_unref","$router","_ssrRenderComponent","_push","_parent","_createVNode","index","_ssrRenderAttrs","_mergeProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAM,aAAa;AAAA,EACtB,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AACR;;;;;ACPM,UAAA,UAAU,IAAI,EAAE;AAChB,UAAA,cAAc,IAAI,CAAC;AAEN,QAAI,CAAE,CAAA;AACT,QAAI,IAAI;AAyBb,eAAA;AAAA,MACT,OAAO;AAAA,MACP,aACE;AAAA,IAAA,CACH;AAEK,UAAA,UAAU,IAAI,KAAK;AAEnB,UAAA,QAAQ,IAAI,EAAE;AAed,UAAA,sBAAsB,CAAC,SAAS;AAC9B,YAAA,QAAQ,KAAK,MAAM,iBAAiB;AAC1C,UAAI,CAAC;AAAO,eAAO,CAAC;AAEpB,aAAO,MAAM,CAAC,EACX,MAAM,SAAS,EACf,IAAI,MAAM,EACV,OAAO,CAAK,MAAA,WAAW,CAAC,CAAC,EACzB,IAAI,CAAK,MAAA,WAAW,CAAC,CAAC;AAAA,IAC3B;;;;;kKAS0DA,gBAAAC,WAAA,OAAA,MAAAA,mBAAS,YAAY;AAevD,UAAAA,MAAO,OAAA,GAAA;0CACX,OAAOA,MAAW,WAAA,KAAA,CAAA,EAAO,gBAAc,CAAA,mEAAA;AAAA,MAAA;;;WAGlCA,MAAO,OAAA,GAAA;;;;;;;QAKf,OAAM;AAAA,QAAO,OAAM;AAAA,QAAQ,OAAM;AAAA,QACvC,SAAK,CAAA,WAAEC,KAAO,QAAC,KAAI,WAAA;AAAA,MAAA;;AAKT,YAAAC,mBAAA,wBAAA,EAAA,IAAG,aAAS;AAAA,yBAAzB,CAKc,GAAAC,QAAAC,UAAA,aAAA;;;;;cAJZC,YAGM,OAFJ,EAAA,OAAM,iIAA8H,SAEtI;AAAA;;;;;AAEW,YAAAH,mBAAA,wBAAA,EAAA,IAAG,cAAU;AAAA,yBAA1B,CAKc,GAAAC,QAAAC,UAAA,aAAA;;;;;cAJZC,YAGM,OAFJ,EAAA,OAAM,sIAAmI,SAE3I;AAAA;;;;;;oBAmB0BL,MAAK,KAAA,GAAA,CAArB,MAAMM,WAAK;0CACZ,IAAI,CAAA,SAAA;AACF,YAAA,oBAAoB,IAAI,EAAE,QAAM;+FACvB,oBAAoB,IAAI,EAAE,KAAI,IAAA,CAAA,CAAA,QAAA;AAAA,QAAA;;;;;;;;;;;;;;;;;;AC/IpD,QAAA,QAAAC,eAAAC,WAAA,EAAA,OAAM,kBAAc,MAAA,CAAA,CAAA,2BAAA;;;;;;;;;;;"}